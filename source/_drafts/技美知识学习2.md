---
title: 技术美术知识学习3200：混合模式及剔除
date: 2021-11-16 19:05:06
categories: 
    - [图形学]
    - [百人计划]
    - [Unity]
author: songjihu
avatar: 'http://82.156.182.226:8099/Avatar/avatar.jpg'
authorLink: 'http://82.156.182.226'
description: DOF景深效果原理和实现
photos: http://82.156.182.226:8099/img/my/QQ截图20211112144945.png
mathjax: true

---

学习教程来自:[【技术美术百人计划】图形 3.2 混合模式及剔除](https://www.bilibili.com/video/BV1sL4y1v7SS)

# 笔记

## 1. 什么是混合模式？
将当前已有颜色和即将绘制的颜色混合在一起的方式或算法。  
语法：  
|代码|说明|
|:----:|:----:|
|Blend Off|关闭混合（默认）|
|Blend SrcFactor DstFactor|color = shader输出颜色 \* SrcFactor op GBuffer中的颜色 \* DstFactor|
|Blend SrcFactor DstFactor, SrcFactorA DstFactorA|同上，额外指定了Alpha通道的混合参数|
|BlendOp Value|指定混合方式，默认ADD| 
|BlendOp OpColor, OpAlpha|同上，额外指定了Alpha|
|AlphaToMaskOn|常用在开启MSAA的地表植被的渲染|

## 2. 混合模式有哪些类型？
一些常见的混合，详见官方文档  

```hlsl
Blend SrcAlpha OneMinusSrcAlpha // Traditional transparency alpha混合
Blend One OneMinusSrcAlpha // Premultiplied transparency 预乘透明度
Blend One One // Additive 相加混合
Blend OneMinusDstColor One // Soft Additive 柔和相加混合
Blend DstColor Zero // Multiplicative 相乘混合 正片叠底
Blend DstColor SrcColor // 2x Multiplicative 2倍相乘混合
```

使用代码
```hlsl
Blend N SrcFactor DstFactor
Blend N SrcFactor DstFactor, SrcFactorA DstFactorA
BlendOp N Op
BlendOp N OpColor, OpAlpha
```

## 3. 混合模式的实现方式
Normal  
Alpha  
Darken  
Multiply  
Screen  
Lighten  
LinearDodge  
ColorBurn 只支持OpenGL unity不支持  



## 4. 剔除的实现方式
1. 法线剔除：根据法线朝向进行剔除，Cull Off/Front/Back
2. 面裁切：在片元阶段直接丢弃满足某些条件的像素，Clip()，在某些PowerVR机型上效率很低，最好在AlphaTest队列中使用

# 作业

## 实现常用的混合模式，并设计使用界面

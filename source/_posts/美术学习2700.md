---
title: 美术学习2700：Metallic与Speculer流程
date: 2021-09-13 08:57:57
categories: 
    - [美术]
    - [百人计划]
author: songjihu
avatar: 'http://82.156.182.226:8099/Avatar/avatar.jpg'
authorLink: 'http://82.156.182.226'
description: 2种PBR资源的区别及互相转换
photos: http://82.156.182.226:8099/img/my/QQ截图20210917204609.png
mathjax: true
---

学习教程来自:[【技术美术百人计划】美术 2.7 Metallic与Speculer流程](https://www.bilibili.com/video/BV1k64y1Y7PD)

# 笔记
## 0. 什么是次世代
高低模烘焙过的、和使用PBR贴图的模型  
PBR：基于物理渲染

## 1. 2种流程
金属Metal/粗糙度Roughness工作流程：比较符合直觉，容易调参，但不易调节F0值（0度菲涅尔反射值）  
镜面反射Specular/光泽度Glossiness工作流程：错误的贴图会打破能量守恒  

通用的部分：Normal、AO、Height  

### 1.1 Metal/Roughness工作流程
<div align="center">
<img src="http://82.156.182.226:8099/img/my/QQ截图20210914204408.png
" width="100%" height="70%" >
<center>SP中的贴图导出</center>
<br/>
</div>
其中特有的贴图

1. Base Color(sRGB)：
非导体的漫反射颜色（Diffuse Reflected Color/Albedo）（50-240sRGB）和金属导体（180-250sRGB）的镜面反射F0值。  
其中前者使用了0.04的F0值。  
范围的验证可使用SD的PBR Base Color/Metallic Validate节点验证  
Micro-Occlusion可以叠加在BaseColor中以增加细节  
2. Metalic(灰度)：
告知如何读取存储在Base Color中的RGB信息，0-1代表非金属-金属  
3. Roughness(灰度)：
0-1代表光滑-粗糙

### 1.2 Specular/Glossiness工作流程
<div align="center">
<img src="http://82.156.182.226:8099/img/my/QQ截图20210916191627.png
" width="100%" height="70%" >
<center>SP中的贴图导出</center>
<br/>
</div>
1. Base Color(sRGB)：存储漫反射颜色Albedo（纯金属应为黑色）
2. Specular(sRGB)：F0值（0度菲涅尔反射值），基于真实世界测量得到
3. Glossiness(灰度)：光滑程度，0粗糙-1光滑

### 1.3 优缺点
当贴图分辨率和纹素密度过小时，2种工作流程会在金属和非金属的交界处产生白边/黑边（需要一张良好大小和布局的UV来避免）。  
来源文章开头的PPT，以下为概括版
||MR|SG|
|:----:|:----:|:----:|
|优势|F0值固定、纹理缓存低、兼容性广|边缘效应弱、F0值可调整|
|劣势|F0值不易调整、边缘效应明显（因为是白边）|F0值的随意调整可能打破能量守恒、纹理缓存占用大、美术人员难上手|

## 2. 流程转换

### 2.1 Metallic转Specular
<div align="center">
<img src="http://82.156.182.226:8099/img/my/QQ截图20210916202846.png
" width="70%" height="70%" >
<center>2、3、4依次得到Diffuse、Specular、Glossiness</center>
<br/>
</div>

### 2.2 Specular转Metallic
<div align="center">
<img src="http://82.156.182.226:8099/img/my/QQ截图20210917211322.png
" width="100%" height="70%" >
<center>拿上一步导出的结果到SD节点转换</center>
<br/>
</div>
<div align="center">
<img src="http://82.156.182.226:8099/img/my/QQ截图20210917202415.png
" width="70%" height="70%" >
<center>拿上一步导出的结果到PS中转换</center>
<br/>
</div>

步骤：
1. BaseColor：在Specular图层中。在选择中使用色彩范围选中金属部分的分区给Specular做遮罩，复制出Diffuse图层，将刚才的选区反选作为他的遮罩。
2. Metallic：新建黑色图层，在Specular的遮罩选区选中填充白色。
3. Roughness：反相Glossiness。

# 作业
将贴图注意点总结进入上一节的规范中，测试一下这2个流程的贴图转换

## 流程转换
上述操作的结果：
<div align="center">
<img src="http://82.156.182.226:8099/img/my/QQ截图20210917204609.png
" width="100%" height="70%" >
<center>笔记中的操作结果，颜色基本一致，除了Specular和Roughness经过转换后，又调整了下强度高光才基本一致</center>
<br/>
</div>

## 贴图规范
||非金属|金属|
|:----:|:----:|:----:|
|BaseColor|暗色值不低于30-50，亮色值不高于240（可用SD节点验证范围）|查表，大概为180-255|
|Metallic|灰度值低于235时，对应区域的BaseColor反射值应当降低||
|Diffuse|除了Micro-Occlusion不应包含光照信息，暗色值不低于30-50，亮色值不高于240|值取0|
|Specular|查表，可先预设为0.04，一般为0.02-0.05，宝石0.05-0.17，液体0.02-0.04|查表，180-255（sRGB下）|